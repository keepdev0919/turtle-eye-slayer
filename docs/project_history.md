# 아웃소싱 인수인계 문서: [ 전집중 호흡 : 안구와 경추 ]

## 1. 프로젝트 개요
**목표**: 개발자의 거북목 및 안구 건조증 방지를 위한 '귀살대' 컨셉의 헬스 알림 프로그램 개발.
**핵심 기능**:
*   지정된 시간(매 시 00분, 50분 등)에 전체 화면 알림 팝업.
*   귀살대 캐릭터(렌고쿠, 시노부, 탄지로 등 12명 이상)가 등장하여 무작위 명대사와 함께 스트레칭 독려.
*   **심플 & 다크 테마 UI**: 복잡한 장식을 배제하고 캐릭터 이미지와 깔끔한 텍스트 바, 세련된 Hover 버튼 적용.
*   **사용자 커스텀**: 사용자가 직접 원하는 이미지와 대사를 추가하여 랜덤 목록에 반영 가능.
*   **편리한 설정**: 캐릭터 목록 더블클릭으로 바로 수정 가능하며, 이미지 미리보기 기능 제공.

## 2. 기술 스택 & 환경
*   **언어**: Python 3.x
*   **GUI**: `tkinter` (표준 라이브러리)
    *   `Canvas`를 이용한 레이어링 (이미지 -> 텍스트 바 -> 버튼).
    *   `overrideredirect(True)`로 타이틀바 제거 및 드래그 로직 구현.
    *   커스텀 `HoverButton` 클래스로 세련된 버튼 스타일링.
*   **이미지 처리**: `Pillow (PIL)` (이미지 리사이징, 리샘플링)
*   **스케줄링**: `schedule` 라이브러리 (백그라운드 타이머)
*   **데이터 관리**: `json` 파일 (`config.json`, `characters.json`)
*   **배포/빌드**: `PyInstaller` (macOS `.app` 번들 생성)

## 3. 프로젝트 구조
```text
neck_eye_training/
├── assets/                  # 이미지 리소스
│   ├── rengoku.png, ...     # 캐릭터 이미지 (렌고쿠, 시노부, 텐겐 등 본부 소속)
│   └── custom_*.png         # 사용자가 추가한 커스텀 이미지
├── docs/                    # 문서화 (본 파일 포함)
├── build_apps.sh            # PyInstaller 빌드 자동화 스크립트 (중요!)
├── main.py                  # [메인] 알림 팝업 (Minimal UI Design)
├── settings.py              # [설정] 캐릭터 관리 (추가/수정/삭제, 미리보기 지원)
├── test_ui.py               # [테스트] UI 즉시 실행용 스크립트
├── config.json              # 사용자 설정 (알림 시간)
└── characters.json          # 캐릭터 데이터 (경로, 이름, 대사)
```

## 4. 구현 상세 내용 (히스토리)

### A. UI 리뉴얼 (심플 & 모던) (`main.py`)
*   **초기 버전**: 화려한 금색 프레임과 장식 사용 -> 캐릭터가 가려지고 답답함.
*   **최종 버전**: 장식을 모두 제거하고 '이미지 본연의 맛'을 살리는 Borderless 디자인 채택.
*   **버튼 디자인**: 기본 버튼 대신 `tk.Label`을 상속받은 `HoverButton` 클래스를 구현하여 색상 반전(마우스 오버) 효과와 어두운 테마 적용.

### B. 사용자 편의성 대폭 강화 (`settings.py`)
*   **더블클릭 수정**: 목록의 캐릭터를 더블클릭하면 즉시 '수정 모드'로 진입.
*   **이미지 미리보기**: 파일 선택 시 혹은 수정 시, 해당 이미지가 UI에 어떻게 보일지 리사이즈된 미리보기 제공.
*   **통합 다이얼로그**: 추가(Add)와 수정(Edit) 로직을 하나의 함수로 통합하여 유지보수성 향상.

### C. macOS 앱 빌드 (`build_apps.sh`)
*   **초기 문제**: `.command` 쉘 스크립트는 터미널 창이 남고, 보안 경고가 뜸.
*   **해결**: `PyInstaller`를 사용하여 완전한 `.app` 패키지로 빌드.
    *   `--noconsole --windowed` 옵션으로 터미널 숨김.
    *   `sys.frozen` 체크 로직을 넣어, 앱으로 패키징된 상태에서도 `assets` 폴더 경로를 올바르게 찾도록 수정함.
*   **보안 이슈**: 빌드 후 `xattr -cr *.app` 명령어를 통해 macOS Quarantine(격리) 속성을 제거해야 실행 가능.

## 5. 유지보수 가이드 (이어서 작업할 때)

### 필수: 빌드 방법
코드(py)를 수정하면 반드시 **재빌드**를 해야 `.app`에 반영됩니다.
```bash
# 터미널에서 실행
sh build_apps.sh
# 완료 후 메시지 확인
```

### 캐릭터 데이터 관리
*   `characters.json` 파일을 직접 수정해도 되지만, 가급적 `환경설정.app` UI를 이용하는 것을 권장.
*   새로운 기본 캐릭터를 추가하려면 `assets/`에 이미지를 넣고 json에 경로를 추가하면 됨.

### 발생 가능한 문제 해결
*   **"응용 프로그램을 열 수 없습니다"**: 터미널에서 `xattr -cr "앱이름.app"` 실행.
*   **이미지 못 찾음**: `main.py` 로그 확인 (터미널에서 직접 실행 시). `get_base_dir()` 경로 로직 체크.
